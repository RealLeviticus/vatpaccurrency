<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="VATPAC Controller Audits - Monitor VATSIM controller activity requirements">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>VATPAC Controller Audits</title>
  <link rel="stylesheet" href="css/style.css?v=4">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <a href="index.html" class="nav-brand">VATPAC Audits</a>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <div class="page-header">
      <h1>Controller Audits</h1>
      <div class="tab-switcher">
        <button class="tab-btn active" data-tab="visiting">Visiting</button>
        <button class="tab-btn" data-tab="local">Local</button>
      </div>
    </div>

    <!-- Visiting Audit Tab -->
    <section id="visitingTab" class="audit-tab active">
      <h2 style="color: var(--text-primary); margin-bottom: 1rem; font-size: 1.5rem;">Visiting Controller Audits</h2>
      <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
        Visiting controllers must log at least <strong>3 hours</strong> on VATPAC positions per 3 months to remain current on the roster.
      </p>

      <div class="table-controls">
        <input
          type="search"
          id="visitingSearch"
          placeholder="Search by CID..."
          aria-label="Search visiting audits"
        >
        <select id="visitingFilter" aria-label="Filter by status">
          <option value="all">All Statuses</option>
          <option value="pending">Pending</option>
          <option value="requirement-not-met">Requirement Not Met</option>
          <option value="requirement-met">Requirement Met</option>
        </select>
      </div>

      <div class="table-wrapper">
        <table class="data-table">
          <thead>
            <tr>
              <th data-sort="cid">CID</th>
              <th data-sort="rating">Rating</th>
              <th data-sort="status">Status</th>
              <th data-sort="hours">Hours</th>
              <th data-sort="lastControlled">Last Controlled</th>
            </tr>
          </thead>
          <tbody id="visitingTableBody">
            <tr>
              <td colspan="5" style="text-align: center;">
                <div class="empty-state">
                  <div class="empty-state-icon">⏳</div>
                  <p>Loading audit data...</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="pagination" id="visitingPagination" style="display: none;">
        <button class="pagination-btn" id="visitingPrevBtn">← Previous</button>
        <div class="pagination-info" id="visitingPageInfo">Page 1 of 1</div>
        <button class="pagination-btn" id="visitingNextBtn">Next →</button>
      </div>
    </section>

    <!-- Local Audit Tab -->
    <section id="localTab" class="audit-tab">
      <h2 style="color: var(--text-primary); margin-bottom: 1rem; font-size: 1.5rem;">Local Controller Audits</h2>
      <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
        Local controllers must log at least <strong>one session per 12 months</strong> on VATPAC positions to remain current on the roster.
      </p>

      <div class="table-controls">
        <input
          type="search"
          id="localSearch"
          placeholder="Search by CID..."
          aria-label="Search local audits"
        >
        <select id="localFilter" aria-label="Filter by status">
          <option value="all">All Statuses</option>
          <option value="pending">Pending</option>
          <option value="requirement-not-met">Requirement Not Met</option>
          <option value="requirement-met">Requirement Met</option>
        </select>
      </div>

      <div class="table-wrapper">
        <table class="data-table">
          <thead>
            <tr>
              <th data-sort="cid">CID</th>
              <th data-sort="rating">Rating</th>
              <th data-sort="status">Status</th>
              <th data-sort="hours">Hours</th>
              <th data-sort="lastControlled">Last Controlled</th>
            </tr>
          </thead>
          <tbody id="localTableBody">
            <tr>
              <td colspan="5" style="text-align: center;">
                <div class="empty-state">
                  <div class="empty-state-icon">⏳</div>
                  <p>Loading audit data...</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="pagination" id="localPagination" style="display: none;">
        <button class="pagination-btn" id="localPrevBtn">← Previous</button>
        <div class="pagination-info" id="localPageInfo">Page 1 of 1</div>
        <button class="pagination-btn" id="localNextBtn">Next →</button>
      </div>
    </section>
  </main>

  <!-- JavaScript Modules -->
  <script type="module" src="js/audit.js?v=3"></script>
</body>
</html>
